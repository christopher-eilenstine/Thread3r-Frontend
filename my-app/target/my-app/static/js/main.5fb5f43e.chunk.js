(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{161:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(2),r=a(50),c=a.n(r),i=a(11),o=a(3),l=a(4),j=(a(58),a(59),a(13)),d=a.n(j),b="http://localhost:8080/api/auth/",m={register:function(e,t,a){return d.a.post(b+"signup",{username:e,email:t,password:a})},login:function(e,t){return d.a.post(b+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},logout:function(){localStorage.removeItem("user")},getCurrentUser:function(){return JSON.parse(localStorage.getItem("user"))}},u=a(19),h=a.n(u),O=a(14),g=a.n(O),x=a(20),v=a.n(x),f=function(e){if(!e)return Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},p=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useState)(""),c=Object(o.a)(r,2),i=c[0],l=c[1],j=Object(n.useState)(""),d=Object(o.a)(j,2),b=d[0],u=d[1],O=Object(n.useState)(!1),x=Object(o.a)(O,2),p=x[0],N=x[1],S=Object(n.useState)(""),k=Object(o.a)(S,2),w=k[0],y=k[1];return Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsxs)("div",{className:"card card-container",children:[Object(s.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(s.jsxs)(h.a,{onSubmit:function(s){s.preventDefault(),y(""),N(!0),t.current.validateAll(),0===a.current.context._errors.length?m.login(i,b).then((function(){e.history.push("/profile"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();N(!1),y(t)})):N(!1)},ref:t,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"username",children:"Username"}),Object(s.jsx)(g.a,{type:"text",className:"form-control",name:"username",value:i,onChange:function(e){var t=e.target.value;l(t)},validations:[f]})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)(g.a,{type:"password",className:"form-control",name:"password",value:b,onChange:function(e){var t=e.target.value;u(t)},validations:[f]})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsxs)("button",{className:"btn btn-primary btn-block",disabled:p,children:[p&&Object(s.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(s.jsx)("span",{children:"Login"})]})}),w&&Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:w})}),Object(s.jsx)(v.a,{style:{display:"none"},ref:a})]})]})})},N=a(51),S=function(e){if(!e)return Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},k=function(e){if(!Object(N.isEmail)(e))return Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},w=function(e){if(e.length<3||e.length>20)return Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},y=function(e){if(e.length<6||e.length>40)return Object(s.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},T=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useState)(""),c=Object(o.a)(r,2),i=c[0],l=c[1],j=Object(n.useState)(""),d=Object(o.a)(j,2),b=d[0],u=d[1],O=Object(n.useState)(""),x=Object(o.a)(O,2),f=x[0],p=x[1],N=Object(n.useState)(!1),T=Object(o.a)(N,2),E=T[0],B=T[1],C=Object(n.useState)(""),U=Object(o.a)(C,2),A=U[0],R=U[1];return Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsxs)("div",{className:"card card-container",children:[Object(s.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(s.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),R(""),B(!1),t.current.validateAll(),0===a.current.context._errors.length&&m.register(i,b,f).then((function(e){R(e.data.message),B(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();R(t),B(!1)}))},ref:t,children:[!E&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"username",children:"Username"}),Object(s.jsx)(g.a,{type:"text",className:"form-control",name:"username",value:i,onChange:function(e){var t=e.target.value;l(t)},validations:[S,w]})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)(g.a,{type:"text",className:"form-control",name:"email",value:b,onChange:function(e){var t=e.target.value;u(t)},validations:[S,k]})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)(g.a,{type:"password",className:"form-control",name:"password",value:f,onChange:function(e){var t=e.target.value;p(t)},validations:[S,y]})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),A&&Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("div",{className:E?"alert alert-success":"alert alert-danger",role:"alert",children:A})}),Object(s.jsx)(v.a,{style:{display:"none"},ref:a})]})]})})};function E(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var B="http://localhost:8080/api/test/",C={getPublicContent:function(){return d.a.get(B+"all")},getUserBoard:function(){return d.a.get(B+"user",{headers:E()})},getModeratorBoard:function(){return d.a.get(B+"mod",{headers:E()})},getAdminBoard:function(){return d.a.get(B+"admin",{headers:E()})}},U=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){C.getPublicContent().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data||e.message||e.toString();r(t)}))}),[]),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("header",{className:"jumbotron",children:Object(s.jsx)("h3",{children:a})})})},A=function(){var e=m.getCurrentUser();return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("header",{className:"jumbotron",children:Object(s.jsxs)("h3",{children:[Object(s.jsx)("strong",{children:e.username})," Profile"]})}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(s.jsx)("strong",{children:"Authorities:"}),Object(s.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(s.jsx)("li",{children:e},t)}))})]})},R=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){C.getUserBoard().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(t)}))}),[]),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("header",{className:"jumbotron",children:Object(s.jsx)("h3",{children:a})})})},I=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){C.getModeratorBoard().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(t)}))}),[]),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("header",{className:"jumbotron",children:Object(s.jsx)("h3",{children:a})})})},_=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){C.getAdminBoard().then((function(e){r(e.data)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(t)}))}),[]),Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("header",{className:"jumbotron",children:Object(s.jsx)("h3",{children:a})})})},F=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),j=Object(o.a)(c,2),d=j[0],b=j[1],u=Object(n.useState)(void 0),h=Object(o.a)(u,2),O=h[0],g=h[1];Object(n.useEffect)((function(){var e=m.getCurrentUser();e&&(g(e),r(e.roles.includes("ROLE_MODERATOR")),b(e.roles.includes("ROLE_ADMIN")))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(s.jsx)(i.b,{to:"/",className:"navbar-brand",children:"bezKoder"}),Object(s.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/home",className:"nav-link",children:"Home"})}),a&&Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/mod",className:"nav-link",children:"Moderator Board"})}),d&&Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/admin",className:"nav-link",children:"Admin Board"})}),O&&Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/user",className:"nav-link",children:"User"})})]}),O?Object(s.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/profile",className:"nav-link",children:O.username})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("a",{href:"/login",className:"nav-link",onClick:function(){m.logout()},children:"LogOut"})})]}):Object(s.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(i.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(s.jsx)("div",{className:"container mt-3",children:Object(s.jsxs)(l.c,{children:[Object(s.jsx)(l.a,{exact:!0,path:["/","/home"],component:U}),Object(s.jsx)(l.a,{exact:!0,path:"/login",component:p}),Object(s.jsx)(l.a,{exact:!0,path:"/register",component:T}),Object(s.jsx)(l.a,{exact:!0,path:"/profile",component:A}),Object(s.jsx)(l.a,{path:"/user",component:R}),Object(s.jsx)(l.a,{path:"/mod",component:I}),Object(s.jsx)(l.a,{path:"/admin",component:_})]})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(s.jsx)(i.a,{children:Object(s.jsx)(F,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){}},[[161,1,2]]]);
//# sourceMappingURL=main.5fb5f43e.chunk.js.map